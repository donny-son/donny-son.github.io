<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Drawing Gemstones With ggplot | Don&#39;s Thoughts</title>
<meta name="keywords" content="R, ggplot" />
<meta name="description" content="Intro Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.
This project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution. Additional to the ggplot2 package there are two more dependencies; cowplot and RColorBrewer. cowplot is required for importing the theme_nothing() function(minimal theme without any legends or axis) and the plot_grid() function which enables plotting multiple ggplot objects in a single page.">
<meta name="author" content="Me">
<link rel="canonical" href="https://donny-son.github.io/posts/drawing-gemstones-with-ggplot/" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link rel="preconnect" href="https://fonts.gstatic.com"> 
<link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.d02bf6b2cec3bd9f67202617c5f8c8ea78de6fad35a6c434d49a79cc5ca9b8b1.css" integrity="sha256-0Cv2ss7DvZ9nICYXxfjI6njeb601psQ01Jp5zFypuLE=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://donny-son.github.io/programmer.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://donny-son.github.io/programmer.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://donny-son.github.io/programmer.png">
<link rel="apple-touch-icon" href="https://donny-son.github.io/programmer.png">
<link rel="mask-icon" href="https://donny-son.github.io/programmer.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />

    <script>
    "use strict";

    !function() {
    var t = window.driftt = window.drift = window.driftt || [];
    if (!t.init) {
        if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
        t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
        t.factory = function(e) {
        return function() {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
        };
        }, t.methods.forEach(function(e) {
        t[e] = t.factory(e);
        }), t.load = function(t) {
        var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
        var i = document.getElementsByTagName("script")[0];
        i.parentNode.insertBefore(o, i);
        };
    }
    }();
    drift.SNIPPET_VERSION = '0.3.1';
    drift.load('5h33nvymhycm');
    </script>


<meta property="og:title" content="Drawing Gemstones With ggplot" />
<meta property="og:description" content="Intro Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.
This project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution. Additional to the ggplot2 package there are two more dependencies; cowplot and RColorBrewer. cowplot is required for importing the theme_nothing() function(minimal theme without any legends or axis) and the plot_grid() function which enables plotting multiple ggplot objects in a single page." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://donny-son.github.io/posts/drawing-gemstones-with-ggplot/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-22T06:21:04&#43;09:00" />
<meta property="article:modified_time" content="2021-06-22T06:21:04&#43;09:00" /><meta property="og:site_name" content="donsThoughts" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Drawing Gemstones With ggplot"/>
<meta name="twitter:description" content="Intro Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.
This project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution. Additional to the ggplot2 package there are two more dependencies; cowplot and RColorBrewer. cowplot is required for importing the theme_nothing() function(minimal theme without any legends or axis) and the plot_grid() function which enables plotting multiple ggplot objects in a single page."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://donny-son.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Drawing Gemstones With ggplot",
      "item": "https://donny-son.github.io/posts/drawing-gemstones-with-ggplot/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Drawing Gemstones With ggplot",
  "name": "Drawing Gemstones With ggplot",
  "description": "Intro Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.\nThis project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution. Additional to the ggplot2 package there are two more dependencies; cowplot and RColorBrewer. cowplot is required for importing the theme_nothing() function(minimal theme without any legends or axis) and the plot_grid() function which enables plotting multiple ggplot objects in a single page.",
  "keywords": [
    "R", "ggplot"
  ],
  "articleBody": "Intro Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.\nThis project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution. Additional to the ggplot2 package there are two more dependencies; cowplot and RColorBrewer. cowplot is required for importing the theme_nothing() function(minimal theme without any legends or axis) and the plot_grid() function which enables plotting multiple ggplot objects in a single page. RColorBrewer package is required to import various color palettes. The following images are gem-like patterns created from this exercise.\n    1 2 3  library(ggplot2) library(cowplot) library(RColorBrewer)   Code One global variable has to be defined prior to function definitions.\n1 2  # levels of palette BREWER_MAX = 8   This sets the number of levels of predefined color palettes from RColorBrewer. In this project, the maximum number 8 is used for more depth and complexity.\nFunctions set_jewels_df The following set_jewels_df function creates random sampled dataframe. Detailed explanation of the function arguments is displayed in the following table.\n   Argument Meaning     n_polygons Number of polygons to draw   shape If “square” samples from uniform distribution. If “round” samples from standard normal distribution   seed1 Seed for setting the brewer level to the polygon   seed2 Seed for sampling the x axis   seed3 Seed for sampling the y axis    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  # create polygons set_jewels_df   gg_jewels The following gg_jewels function creates random sampled dataframe by calling the set_jewels_df function and returns the geom_polygon ggplot object. Detailed explanation of the function arguments is displayed in the following table.\n   Argument Meaning     brew_name color scheme name. all palattes can be seen via display.brewer.all()   n_polygons Number of polygons to draw   shape If “square” samples from uniform distribution. If “round” samples from standard normal distribution   seed1 Seed for setting the brewer level to the polygon   seed2 Seed for sampling the x axis   seed3 Seed for sampling the y axis    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  # create \u0026\u0026 plot polygons gg_jewels p return(p) }   Result The following is an example of 5 square and round cut simulated jewels with 5 different color schemes.\n  The complete script and the .Rmd file is available at my repository.\n",
  "wordCount" : "516",
  "inLanguage": "en",
  "datePublished": "2021-06-22T06:21:04+09:00",
  "dateModified": "2021-06-22T06:21:04+09:00",
  "author":{
    "@type": "Person",
    "name": "Me"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://donny-son.github.io/posts/drawing-gemstones-with-ggplot/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Don's Thoughts",
    "logo": {
      "@type": "ImageObject",
      "url": "https://donny-son.github.io/programmer.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://donny-son.github.io/" accesskey="h" title="  (Alt + H)">
                <img src="/rocket.gif" alt="logo" aria-label="logo"
                    height="30"> </a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://donny-son.github.io/posts/" title="posts">
                    <span>posts</span>
                </a>
            </li>
            <li>
                <a href="https://donny-son.github.io/search/" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="https://donny-son.github.io/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://donny-son.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://donny-son.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      Drawing Gemstones With ggplot
    </h1>
    <div class="post-meta">June 22, 2021&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#intro" aria-label="Intro">Intro</a></li>
                <li>
                    <a href="#code" aria-label="Code">Code</a><ul>
                        
                <li>
                    <a href="#functions" aria-label="Functions">Functions</a><ul>
                        
                <li>
                    <a href="#set_jewels_df" aria-label="set_jewels_df"><code>set_jewels_df</code></a></li>
                <li>
                    <a href="#gg_jewels" aria-label="gg_jewels"><code>gg_jewels</code></a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#result" aria-label="Result">Result</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="intro">Intro<a hidden class="anchor" aria-hidden="true" href="#intro">#</a></h1>
<p>Composition of irregular and complex patterns can be simplified with ggplot; graphical package used in R.<br>
This project aims to recreate various crystallic shapes via random sampling from uniform and standard normal distribution.
Additional to the <code>ggplot2</code> package there are two more dependencies; <code>cowplot</code> and <code>RColorBrewer</code>.
<code>cowplot</code> is required for importing the <code>theme_nothing()</code> function(minimal theme without any legends or axis) and the <code>plot_grid()</code> function which enables plotting multiple ggplot objects in a single page.
<code>RColorBrewer</code> package is required to import various color palettes.
The following images are gem-like patterns created from this exercise.</p>
<figure>
    <img loading="lazy" src="amber_round.png"
         alt="Solar"/> 
</figure>

<figure>
    <img loading="lazy" src="emerald_square.png"
         alt="Emerald"/> 
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">library(ggplot2)
library(cowplot)
library(RColorBrewer)
</code></pre></td></tr></table>
</div>
</div><h1 id="code">Code<a hidden class="anchor" aria-hidden="true" href="#code">#</a></h1>
<p>One global variable has to be defined prior to function definitions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># levels of palette
BREWER_MAX = 8
</code></pre></td></tr></table>
</div>
</div><p>This sets the number of levels of predefined color palettes from <code>RColorBrewer</code>.
In this project, the maximum number 8 is used for more depth and complexity.</p>
<h2 id="functions">Functions<a hidden class="anchor" aria-hidden="true" href="#functions">#</a></h2>
<h3 id="set_jewels_df"><code>set_jewels_df</code><a hidden class="anchor" aria-hidden="true" href="#set_jewels_df">#</a></h3>
<p>The following <code>set_jewels_df</code> function creates random sampled dataframe.
Detailed explanation of the function arguments is displayed in the following table.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>n_polygons</td>
<td>Number of polygons to draw</td>
</tr>
<tr>
<td>shape</td>
<td>If &ldquo;square&rdquo; samples from uniform distribution. If &ldquo;round&rdquo; samples from standard normal distribution</td>
</tr>
<tr>
<td>seed1</td>
<td>Seed for setting the brewer level to the polygon</td>
</tr>
<tr>
<td>seed2</td>
<td>Seed for sampling the x axis</td>
</tr>
<tr>
<td>seed3</td>
<td>Seed for sampling the y axis</td>
</tr>
</tbody>
</table>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># create polygons
set_jewels_df &lt;- function(n_polyngons, shape, seed1, seed2, seed3) {
  n &lt;- n_polyngons*4
  ids &lt;- factor(1:n)
  set.seed(seed1)
  values &lt;- data.frame(
    id = ids,
    value = sample(1:n, BREWER_MAX, replace = TRUE)
  )
  positions &lt;- data.frame(
    id = rep(ids, each=4)
  )
  if (shape == &#34;square&#34;) {
    set.seed(seed1); positions$x &lt;- runif(4*n)
    set.seed(seed2); positions$y &lt;- runif(4*n)   
  } else if (shape == &#34;round&#34;) {
    set.seed(seed1); positions$x &lt;- rnorm(4*n)
    set.seed(seed2); positions$y &lt;- rnorm(4*n)   
  } else {
    stop(&#34;shape argument must be &#39;square&#39; or &#39;round&#39;&#34;)
  }
  polydf &lt;- merge(values, positions,  by = c(&#34;id&#34;))
  return(polydf)
}
</code></pre></td></tr></table>
</div>
</div><h3 id="gg_jewels"><code>gg_jewels</code><a hidden class="anchor" aria-hidden="true" href="#gg_jewels">#</a></h3>
<p>The following <code>gg_jewels</code> function creates random sampled dataframe by calling the <code>set_jewels_df</code> function and returns the <code>geom_polygon</code> ggplot object.
Detailed explanation of the function arguments is displayed in the following table.</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>brew_name</td>
<td>color scheme name. all palattes can be seen via <code>display.brewer.all()</code></td>
</tr>
<tr>
<td>n_polygons</td>
<td>Number of polygons to draw</td>
</tr>
<tr>
<td>shape</td>
<td>If &ldquo;square&rdquo; samples from uniform distribution. If &ldquo;round&rdquo; samples from standard normal distribution</td>
</tr>
<tr>
<td>seed1</td>
<td>Seed for setting the brewer level to the polygon</td>
</tr>
<tr>
<td>seed2</td>
<td>Seed for sampling the x axis</td>
</tr>
<tr>
<td>seed3</td>
<td>Seed for sampling the y axis</td>
</tr>
</tbody>
</table>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># create &amp;&amp; plot polygons
gg_jewels &lt;- function(brew_name, n_polygons, dist, seed1, seed2, seed3) {
  plte &lt;- brewer.pal(BREWER_MAX, brew_name)
  pdf &lt;- set_jewels_df(n_polygons,dist,seed1,seed2,seed3)
  ggplot(pdf, aes(x=x, y=y)) +
    geom_polygon(aes(fill=factor(value), group=id), alpha=0.2) + 
    scale_fill_manual(values = plte) +
    coord_equal() +
    theme_nothing() + 
    theme(
      panel.background = element_rect(fill=&#34;black&#34;, color = &#34;black&#34;),
      plot.background = element_rect(fill=&#34;black&#34;, color = &#34;black&#34;)
      )-&gt; p
  return(p) 
}
</code></pre></td></tr></table>
</div>
</div><h1 id="result">Result<a hidden class="anchor" aria-hidden="true" href="#result">#</a></h1>
<p>The following is an example of 5 square and round cut simulated jewels with 5 different color schemes.</p>
<figure>
    <img loading="lazy" src="all.png"
         alt="Composition of result images"/> 
</figure>

<p>The complete script and the <code>.Rmd</code> file is available at <a href="https://github.com/donny-son/gg_jewels">my repository</a>.</p>

</div>
  <script src="https://utteranc.es/client.js"
          repo="donny-son/blog-comments"
          issue-term="pathname"
          theme="github-dark-orange"
          crossorigin="anonymous"
          async>
  </script>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://donny-son.github.io/tags/r/">R</a></li>
      <li><a href="https://donny-son.github.io/tags/ggplot/">ggplot</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://donny-son.github.io/posts/git-revert-and-reset-simplified/">
    <span class="title">Next Page »</span>
    <br>
    <span>Git Revert and Reset Simplified</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://donny-son.github.io/">Don&#39;s Thoughts</a></span>
    
    
    
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
