<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>R Tips and Tricks | Don&#39;s Thoughts</title>
<meta name="keywords" content="R, RStudio" />
<meta name="description" content="Intro Over the past few years studying statistics, I&rsquo;ve learned a few tips and tricks with R and RStudio.
Import multiple libraries at once Since R has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.
1 2  pkgs &lt;- c(&#34;ggplot2&#34;, &#34;dplyr&#34;, &#34;sp&#34;, &#34;sf&#34;, &#34;reticulate&#34;, ...) lapply(library, pkgs, character.only = TRUE)   Also note that importing tidyverse package can come in handy.">
<meta name="author" content="Me">
<link rel="canonical" href="https://donny-son.github.io/posts/r-tips-and-tricks/" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.04512c372388e08b5118f5b117b2d3efef4ddae52017e16085c8d8d4e361c43d.css" integrity="sha256-BFEsNyOI4ItRGPWxF7LT7&#43;9N2uUgF&#43;FghcjY1ONhxD0=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://donny-son.github.io/programmer.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://donny-son.github.io/programmer.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://donny-son.github.io/programmer.png">
<link rel="apple-touch-icon" href="https://donny-son.github.io/programmer.png">
<link rel="mask-icon" href="https://donny-son.github.io/programmer.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />

    <script>
    "use strict";

    !function() {
    var t = window.driftt = window.drift = window.driftt || [];
    if (!t.init) {
        if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
        t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
        t.factory = function(e) {
        return function() {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
        };
        }, t.methods.forEach(function(e) {
        t[e] = t.factory(e);
        }), t.load = function(t) {
        var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
        var i = document.getElementsByTagName("script")[0];
        i.parentNode.insertBefore(o, i);
        };
    }
    }();
    drift.SNIPPET_VERSION = '0.3.1';
    drift.load('5h33nvymhycm');
    </script>


<meta property="og:title" content="R Tips and Tricks" />
<meta property="og:description" content="Intro Over the past few years studying statistics, I&rsquo;ve learned a few tips and tricks with R and RStudio.
Import multiple libraries at once Since R has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.
1 2  pkgs &lt;- c(&#34;ggplot2&#34;, &#34;dplyr&#34;, &#34;sp&#34;, &#34;sf&#34;, &#34;reticulate&#34;, ...) lapply(library, pkgs, character.only = TRUE)   Also note that importing tidyverse package can come in handy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://donny-son.github.io/posts/r-tips-and-tricks/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-16T07:32:54&#43;09:00" />
<meta property="article:modified_time" content="2021-04-16T07:32:54&#43;09:00" /><meta property="og:site_name" content="donsThoughts" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="R Tips and Tricks"/>
<meta name="twitter:description" content="Intro Over the past few years studying statistics, I&rsquo;ve learned a few tips and tricks with R and RStudio.
Import multiple libraries at once Since R has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.
1 2  pkgs &lt;- c(&#34;ggplot2&#34;, &#34;dplyr&#34;, &#34;sp&#34;, &#34;sf&#34;, &#34;reticulate&#34;, ...) lapply(library, pkgs, character.only = TRUE)   Also note that importing tidyverse package can come in handy."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://donny-son.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "R Tips and Tricks",
      "item": "https://donny-son.github.io/posts/r-tips-and-tricks/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "R Tips and Tricks",
  "name": "R Tips and Tricks",
  "description": "Intro Over the past few years studying statistics, I\u0026rsquo;ve learned a few tips and tricks with R and RStudio.\nImport multiple libraries at once Since R has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.\n1 2  pkgs \u0026lt;- c(\u0026#34;ggplot2\u0026#34;, \u0026#34;dplyr\u0026#34;, \u0026#34;sp\u0026#34;, \u0026#34;sf\u0026#34;, \u0026#34;reticulate\u0026#34;, ...) lapply(library, pkgs, character.only = TRUE)   Also note that importing tidyverse package can come in handy.",
  "keywords": [
    "R", "RStudio"
  ],
  "articleBody": "Intro Over the past few years studying statistics, Iâ€™ve learned a few tips and tricks with R and RStudio.\nImport multiple libraries at once Since R has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.\n1 2  pkgs  c(\"ggplot2\", \"dplyr\", \"sp\", \"sf\", \"reticulate\", ...) lapply(library, pkgs, character.only = TRUE)   Also note that importing tidyverse package can come in handy.\nBackwards assignment with pipe(%%) operators If youâ€™re familiar with the concept of tidy data, you already know that the dplyr package supports backwards(?) assignment for variables.\n1 2  library(dplyr) iris %% head - iris.head   This comes in handy when you have multiple pipes.\n1 2 3 4 5  library(dplyr) iris %% some.first.operation %% ... %% some.last.operation - iris.cleaned   The Best IDE for R Personally, itâ€™s hands down RStudio. I know other editors such as VSCode, PyCharm support R with various extensions. They are all okay, but none of those could not top RStudio. I just keep comming back to it. The code execution for Rmd files and the variable viewer, the default 2*2 grid layout just gives me some sort of peace of mind. Iâ€™m perfectly aware that RStudio is not the best editor in the development world, but at least itâ€™s great just for R.\nI also use Neovim with Nvim-R. This neovim package offers a similarly satisfying experience as it supports variable viewer with great autocompletion as well.\nTips for RStudio Path Settings using Snippets For roughly 99% of my workflow, I store all my rmd, r, images, csv and .RData all under one repository. But, in RStudio the default path when you first send a command to the R console is not that repository. It actually points to your R kernel path. So, this means everytime you will have to manually copy the absolute link to your repository and setwd().\nLuckily, for us we can use snippets and RStudioAPI library to relieve the pain. Under RStudio Settings(Preferences)  Code at the bottom, you can see Edit snippets. Click and paste the snippet in your snippet file.\n1 2 3  snippet setpath current_working_dir   Then, everytime on top of your script, you can just simply type setpath and Rstudio will recognize this as your snippet and suggests completion. Hit enter and execute the two lines in your console. Just like that, your R consoleâ€™s path is aligned with the R script path you are editing.\nThemes RStudio provides various color themes by default, but somehow I ended up not liking them all. You can actually add colorthemes from this theme editor website.   Fonts I recommend using ligature supported fonts such as JetBrains Mono or Fira Code. Theyâ€™re all open-sourced and looks incredible when in the editor. Math ligatures can save you quite some time on debugging.   Python and R at the Same time Iâ€™m sure most of you heard that jupyter can run julia, python and r kernels. But, is it easy to use different languages cell by cell? Furthermore, can you share objects between those languages?\nThe reticulate library makes this possible. In the latest version of RStudio you can also handpick your desired python environment associated with the reticulate package. I prefer using a conda environment, so created one named ret and use this as the default interpreter for Rstudio.\nConclusion More tips and tricks will follow. Thanks for taking the time to read ðŸ‘‹.\n",
  "wordCount" : "568",
  "inLanguage": "en",
  "datePublished": "2021-04-16T07:32:54+09:00",
  "dateModified": "2021-04-16T07:32:54+09:00",
  "author":{
    "@type": "Person",
    "name": "Me"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://donny-son.github.io/posts/r-tips-and-tricks/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Don's Thoughts",
    "logo": {
      "@type": "ImageObject",
      "url": "https://donny-son.github.io/programmer.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://donny-son.github.io/" accesskey="h" title="  (Alt + H)">
                <img src="/rocket.gif" alt="logo" aria-label="logo"
                    height="30"> </a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://donny-son.github.io/posts/" title="posts">
                    <span>posts</span>
                </a>
            </li>
            <li>
                <a href="https://donny-son.github.io/search/" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="https://donny-son.github.io/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://donny-son.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://donny-son.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      R Tips and Tricks
    </h1>
    <div class="post-meta">April 16, 2021&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Me
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#intro" aria-label="Intro">Intro</a></li>
                <li>
                    <a href="#import-multiple-libraries-at-once" aria-label="Import multiple libraries at once">Import multiple libraries at once</a></li>
                <li>
                    <a href="#backwards-assignment-with-pipe-operators" aria-label="Backwards assignment with pipe(%&amp;gt;%) operators">Backwards assignment with pipe(<code>%&gt;%</code>) operators</a></li>
                <li>
                    <a href="#the-best-ide-for-r" aria-label="The Best IDE for R">The Best IDE for R</a><ul>
                        
                <li>
                    <a href="#tips-for-rstudio" aria-label="Tips for RStudio">Tips for RStudio</a><ul>
                        
                <li>
                    <a href="#path-settings-using-snippets" aria-label="Path Settings using Snippets">Path Settings using Snippets</a></li>
                <li>
                    <a href="#themes" aria-label="Themes">Themes</a></li>
                <li>
                    <a href="#fonts" aria-label="Fonts">Fonts</a></li>
                <li>
                    <a href="#python-and-r-at-the-same-time" aria-label="Python and R at the Same time">Python and R at the Same time</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="intro">Intro<a hidden class="anchor" aria-hidden="true" href="#intro">#</a></h2>
<p>Over the past few years studying statistics, I&rsquo;ve learned a few tips and tricks with <code>R</code> and <code>RStudio</code>.</p>
<h2 id="import-multiple-libraries-at-once">Import multiple libraries at once<a hidden class="anchor" aria-hidden="true" href="#import-multiple-libraries-at-once">#</a></h2>
<p>Since <code>R</code> has some object-oriented goodness, importing multiple libraries all at once is possible in the following way.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="n">pkgs</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;ggplot2&#34;</span><span class="p">,</span> <span class="s">&#34;dplyr&#34;</span><span class="p">,</span> <span class="s">&#34;sp&#34;</span><span class="p">,</span> <span class="s">&#34;sf&#34;</span><span class="p">,</span> <span class="s">&#34;reticulate&#34;</span><span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
<span class="nf">lapply</span><span class="p">(</span><span class="n">library</span><span class="p">,</span> <span class="n">pkgs</span><span class="p">,</span> <span class="n">character.only</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Also note that importing <a href="https://www.tidyverse.org/packages/"><code>tidyverse</code></a> package can come in handy.</p>
<h2 id="backwards-assignment-with-pipe-operators">Backwards assignment with pipe(<code>%&gt;%</code>) operators<a hidden class="anchor" aria-hidden="true" href="#backwards-assignment-with-pipe-operators">#</a></h2>
<p>If you&rsquo;re familiar with the concept of <code>tidy</code> data, you already know that the <code>dplyr</code> package supports backwards(?) assignment for variables.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="n">iris</span> <span class="o">%&gt;%</span> <span class="n">head</span> <span class="o">-&gt;</span> <span class="n">iris.head</span>
</code></pre></td></tr></table>
</div>
</div><p>This comes in handy when you have multiple pipes.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="n">iris</span> <span class="o">%&gt;%</span>
  <span class="n">some.first.operation</span> <span class="o">%&gt;%</span>
  <span class="kc">...</span> <span class="o">%&gt;%</span>
  <span class="n">some.last.operation</span> <span class="o">-&gt;</span> <span class="n">iris.cleaned</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="the-best-ide-for-r">The Best IDE for R<a hidden class="anchor" aria-hidden="true" href="#the-best-ide-for-r">#</a></h2>
<p>Personally, it&rsquo;s hands down <code>RStudio</code>. I know other editors such as VSCode, PyCharm support <code>R</code> with various extensions. They are all okay, but none of those could not top RStudio. I just keep comming back to it. The code execution for <code>Rmd</code> files and the variable viewer, the default 2*2 grid layout just gives me some sort of peace of mind. I&rsquo;m perfectly aware that RStudio is not the <strong>best</strong> editor in the development world, but at least it&rsquo;s great just for <code>R</code>.<br>
I also use <code>Neovim</code> with <a href="https://github.com/jamespeapen/Nvim-R/wiki"><code>Nvim-R</code></a>. This neovim package offers a similarly satisfying experience as it supports variable viewer with great autocompletion as well.</p>
<h3 id="tips-for-rstudio">Tips for RStudio<a hidden class="anchor" aria-hidden="true" href="#tips-for-rstudio">#</a></h3>
<h4 id="path-settings-using-snippets">Path Settings using Snippets<a hidden class="anchor" aria-hidden="true" href="#path-settings-using-snippets">#</a></h4>
<p>For roughly 99% of my workflow, I store all my <code>rmd</code>, <code>r</code>, images, <code>csv</code> and <code>.RData</code> all under one repository. But, in <code>RStudio</code> the default path when you first send a command to the R console is not that repository. It actually points to your R kernel path. So, this means everytime you will have to manually copy the absolute link to your repository and <code>setwd()</code>.<br>
Luckily, for us we can use snippets and RStudioAPI library to relieve the pain. Under <code>RStudio Settings(Preferences) &gt; Code</code> at the bottom, you can see <code>Edit snippets</code>. Click and paste the snippet in your snippet file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">snippet setpath
	current_working_dir &lt;- dirname(rstudioapi::getActiveDocumentContext()${1:$}path)
	setwd(current_working_dir)${2}
</code></pre></td></tr></table>
</div>
</div><p>Then, everytime on top of your script, you can just simply type <code>setpath</code> and Rstudio will recognize this as your snippet and suggests completion. Hit enter and execute the two lines in your console. Just like that, your R console&rsquo;s path is aligned with the R script path you are editing.</p>
<h4 id="themes">Themes<a hidden class="anchor" aria-hidden="true" href="#themes">#</a></h4>
<p>RStudio provides various color themes by default, but somehow I ended up not liking them all. You can actually add colorthemes from this <a href="https://tmtheme-editor.herokuapp.com/#!/editor/theme/Material%20Theme%20Darker">theme editor website</a>.
<figure>
    <img loading="lazy" src="rstudio-theme.png"
         alt="Description"/> 
</figure>
</p>
<h4 id="fonts">Fonts<a hidden class="anchor" aria-hidden="true" href="#fonts">#</a></h4>
<p>I recommend using ligature supported fonts such as JetBrains Mono or <a href="https://github.com/tonsky/FiraCode">Fira Code</a>. They&rsquo;re all open-sourced and looks incredible when in the editor. Math ligatures can save you quite some time on debugging.
<figure>
    <img loading="lazy" src="fira-code.png"
         alt="Description"/> 
</figure>
</p>
<h4 id="python-and-r-at-the-same-time">Python and R at the Same time<a hidden class="anchor" aria-hidden="true" href="#python-and-r-at-the-same-time">#</a></h4>
<p>I&rsquo;m sure most of you heard that jupyter can run julia, python and r kernels. But, is it easy to use different languages cell by cell? Furthermore, can you share objects between those languages?<br>
The <a href="https://rstudio.github.io/reticulate/"><code>reticulate</code></a> library makes this possible. In the latest version of RStudio you can also handpick your desired python environment associated with the reticulate package. I prefer using a conda environment, so created one named <code>ret</code> and use this as the default interpreter for Rstudio.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>More tips and tricks will follow. Thanks for taking the time to read ðŸ‘‹.</p>

</div>
  <script src="https://utteranc.es/client.js"
          repo="donny-son/blog-comments"
          issue-term="pathname"
          theme="github-dark-orange"
          crossorigin="anonymous"
          async>
  </script>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://donny-son.github.io/tags/r/">R</a></li>
      <li><a href="https://donny-son.github.io/tags/rstudio/">RStudio</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://donny-son.github.io/posts/cronjob-with-conda/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>Cronjob With Conda</span>
  </a>
  <a class="next" href="https://donny-son.github.io/posts/creating-gui-for-your-python-app/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>Creating Gui for Your Python App</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://donny-son.github.io/">Don&#39;s Thoughts</a></span>
    
    
    
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
